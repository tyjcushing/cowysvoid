<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Page Title — Cowy’s Void</title>
  <meta name="description" content="Short description for this page." />

  <!-- Icons -->
  <link rel="icon" href="/assets/icons/favicon.ico" sizes="any">
  <link rel="icon" type="image/png" href="/assets/icons/BlackHole.png" sizes="32x32">
  <link rel="icon" type="image/png" href="/assets/icons/BlackHole.png" sizes="64x64">
  <link rel="icon" type="image/png" href="/assets/icons/BlackHole.png" sizes="180x180">
  <link rel="apple-touch-icon" href="/assets/icons/BlackHole.png">

  <!-- Unified styles -->
  <link rel="stylesheet" href="/assets/css/void.css">
</head>
<body>

  <!-- Background video container (behind everything) -->
  <div id="bgVideo" class="bg-video" aria-hidden="true">
    <video id="bgVideoEl" playsinline muted autoplay loop preload="metadata" poster="/assets/Blackhole_Poster.jpg"></video>
  </div>

  <!-- Content layer -->
  <div class="app-layer">
    <header id="site-header" aria-label="Primary"></header>

    <main class="container" id="content">
      <!-- Page header -->
      <header class="page" style="margin: 8px 0 12px">
        <h1 class="title" id="page-title">Page Title</h1>
        <p class="sub">Optional page subtitle goes here.</p>
      </header>

      <!-- Example hero (optional, remove if not needed) -->
      <section class="hero" aria-labelledby="page-title" style="margin-top:18px">
        <div class="hero-left">
          <div class="code">Section Headline</div>
          <h2 class="title">Intro headline<span class="cursor" aria-hidden="true"></span></h2>
          <p class="sub">A short sentence explaining this page.</p>
          <div class="hero-actions" style="margin-top:14px">
            <a class="btn primary" href="#">Primary</a>
            <a class="btn" href="#">Secondary</a>
          </div>
        </div>
        <!-- Optional right column (images/cards) can go here -->
      </section>

      <!-- Page content placeholder -->
      <section class="grid" aria-label="Content">
        <article class="card">
          <h3>Card Title</h3>
          <p>Start building here. Duplicate/remove cards as needed.</p>
        </article>
      </section>
    </main>
  </div><!-- /.app-layer -->

  <!-- Partials injector -->
  <script>
  (async () => {
    try {
      async function loadPartial(url) {
        const res = await fetch(url, { cache: 'no-store' });
        if (!res.ok) return null;
        const html = await res.text();
        const tpl = document.createElement('template');
        tpl.innerHTML = html.trim();

        // move inline <style> from partials into <head>
        tpl.content.querySelectorAll('style').forEach(st => {
          document.head.appendChild(st.cloneNode(true));
          st.remove();
        });

        return tpl.content.firstElementChild || null;
      }

      // Inject NAV
      const header = document.getElementById('site-header');
      const navEl = await loadPartial('/partials/nav.html');
      if (header && navEl) {
        header.innerHTML = '';
        header.appendChild(navEl);
        initNav(header);
      }

      // Inject DISCORD
      const discordEl = await loadPartial('/partials/discord.html');
      if (discordEl) document.body.appendChild(discordEl);

      // Inject FOOTER
      const footerEl = await loadPartial('/partials/footer.html');
      if (footerEl) document.body.appendChild(footerEl);

      // Nav helpers
      function initNav(scope) {
        const btn   = scope.querySelector('.menu-toggle');
        const panel = scope.querySelector('#nav-panel');
        if (btn && panel) {
          btn.addEventListener('click', () => {
            const open = panel.classList.toggle('open');
            btn.setAttribute('aria-expanded', open ? 'true' : 'false');
          });
        }

        // mark active link
        const here = location.pathname.replace(/\/+$/, '').toLowerCase();
        scope.querySelectorAll('.nav-link').forEach(a => {
          let href = (a.getAttribute('href') || '').toLowerCase().replace(/\/+$/, '');
          if (href === '/blog/') href = '/blog';
          if (here === href || ((here === '' || here === '/') && href === '/index.html')) {
            a.setAttribute('aria-current', 'page');
          }
          if (here.startsWith('/blog') && href === '/blog') {
            a.setAttribute('aria-current', 'page');
          }
          // Add custom highlights per section if desired:
          if (here.includes('/mtg') && href === '/mtg.html') a.setAttribute('aria-current','page');
          if (here.includes('/projects') && href === '/projects.html') a.setAttribute('aria-current','page');
        });
      }
    } catch (e) {
      console.warn('Partial load failed:', e);
    }
  })();
  </script>

  <!-- Connection-aware background video loader -->
  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const c = navigator.connection || navigator.mozConnection || navigator.webkitConnection;
      const isFast = !c || (c.effectiveType === '4g' && c.downlink >= 5 && !c.saveData);
      const isWifiLike = !c || (['wifi','ethernet'].includes(c.type || '') || typeof c.type === 'undefined');
      const allowVideo = isFast && isWifiLike;

      const wrap = document.getElementById('bgVideo');
      const vid  = document.getElementById('bgVideoEl');
      if (!wrap || !vid) return;

      if (!allowVideo) {
        wrap.style.display = 'none';
        return;
      }

      vid.src = '/assets/Blackhole_Animtation.mp4';

      const onReady = () => {
        wrap.classList.add('ready');
        const p = vid.play();
        if (p && typeof p.catch === 'function') p.catch(() => {});
      };

      vid.addEventListener('canplay', onReady, { once: true });
      vid.addEventListener('loadeddata', onReady, { once: true });
      vid.addEventListener('loadedmetadata', () => { wrap.classList.add('ready'); }, { once: true });
    });
  </script>

  <!-- (Optional) Under Construction click-guard for content area
  <script>
    const UC = { enabled: false, url: '/under-construction.html' };
    document.addEventListener('DOMContentLoaded', () => {
      if (!UC.enabled) return;
      const scope = document.getElementById('content') || document;
      const anchors = scope.querySelectorAll('a[href]');
      anchors.forEach(a => {
        if (a.dataset.uc === 'off') return;
        const href = a.getAttribute('href');
        if (!href || href.startsWith('#') || href.startsWith('mailto:') || href.startsWith('tel:')) return;
        a.dataset.originalHref = href;
        a.classList.add('uc-disabled');
        a.setAttribute('aria-disabled', 'true');
        if (!a.title) a.title = 'Under construction';
        a.addEventListener('click', (e) => {
          if (e.metaKey || e.ctrlKey || e.shiftKey || a.target === '_blank') return;
          e.preventDefault();
          window.location.href = UC.url;
        });
      });
    });
  </script>
  -->
</body>
</html>
