<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Cowy’s Void — dev • mtg • sci-fantasy</title>
  <meta name="description" content="Cowy’s Void — Tyler’s corner of the net: dev notes, MTG decks, and projects." />

  <!-- Icons -->
  <link rel="icon" href="/assets/icons/favicon.ico" sizes="any">
  <link rel="icon" type="image/png" href="/assets/icons/BlackHole.png" sizes="32x32">
  <link rel="icon" type="image/png" href="/assets/icons/BlackHole.png" sizes="64x64">
  <link rel="icon" type="image/png" href="/assets/icons/BlackHole.png" sizes="180x180">
  <link rel="apple-touch-icon" href="/assets/icons/BlackHole.png">

  <!-- Unified styles -->
  <link rel="stylesheet" href="/assets/css/void.css">
</head>
<body>
  <!-- Background video container (behind everything) -->
  <div id="bgVideo" class="bg-video" aria-hidden="true">
    <video id="bgVideoEl" playsinline muted autoplay loop preload="metadata" poster="/assets/Blackhole_Poster.jpg"></video>
  </div>

  <!-- Content layer above background -->
  <div class="app-layer">
    <header id="site-header" aria-label="Primary"></header>

    <main class="container" id="content">
      <!-- HERO -->
      <section class="hero" aria-labelledby="site-title">
        <div class="hero-left">
          <div class="code">Cowy's &lt;&gt; Void</div>
          <h1 class="title" id="site-title">Welcome to the Void<span class="cursor" aria-hidden="true"></span></h1>
          <p class="sub">Salesforce dev & LWC tinkerer • MTG Commander brewer • D&amp;D &amp; worldbuilder.</p>
          <div class="hero-actions">
            <a class="btn primary" href="/MTG.html">Browse MTG Decks</a>
            <a class="btn" href="/projects.html">Projects</a>
            <a class="btn" href="/about.html">About me</a>
          </div>
        </div>
        <!-- Optional right column (keep for future art/preview)
        <div class="hero-right">
          <div class="hero-card" role="img" aria-label="Black hole themed card">
            <div class="hero-chip">cowysvoid.dev</div>
            <div class="title" style="margin-top:8px">Blue • Purple • Space</div>
            <div class="sub">dev | MTG Commander | D&amp;D &amp; worldbuilder</div>
            <div class="ring" aria-hidden="true"></div>
          </div>
        </div>
        -->
      </section>

      <!-- QUICK SECTIONS -->
      <section class="grid" aria-label="Quick sections" style="margin-top:22px">
        <article class="card" aria-labelledby="notes-head">
          <h3 id="notes-head">Dev Notes</h3>
          <p>Salesforce/LWC, Python scripts, and web toybox.</p>
          <ul class="list">
            <li><a href="/blog.html">Blog index →</a></li>
            <li><a href="/projects.html">Featured projects →</a></li>
            <li><a href="/under-construction.html">Setup / Uses →</a></li>
          </ul>
        </article>

        <!-- Add more cards whenever you’re ready
        <article class="card" aria-labelledby="news-head">
          <h3 id="news-head">What’s new</h3>
          <p>Recent updates, posts, or highlights.</p>
          <ul class="list">
            <li><a href="#">Latest post →</a></li>
            <li><a href="#">Release notes →</a></li>
          </ul>
        </article>
        -->
      </section>
    </main>
  </div><!-- /.app-layer -->

  <!-- Partials injector -->
  <script>
  (async () => {
    try {
      async function loadPartial(url) {
        const res = await fetch(url, { cache: 'no-store' });
        if (!res.ok) return null;
        const html = await res.text();
        const tpl = document.createElement('template');
        tpl.innerHTML = html.trim();

        // Move inline <style> from partials into <head>
        tpl.content.querySelectorAll('style').forEach(st => {
          document.head.appendChild(st.cloneNode(true));
          st.remove();
        });

        return tpl.content.firstElementChild || null;
      }

      // NAV
      const header = document.getElementById('site-header');
      const navEl = await loadPartial('/partials/nav.html');
      if (header && navEl) {
        header.innerHTML = '';
        header.appendChild(navEl);
        initNav(header);
      }

      // DISCORD
      const discordEl = await loadPartial('/partials/discord.html');
      if (discordEl) document.body.appendChild(discordEl);

      // FOOTER
      const footerEl = await loadPartial('/partials/footer.html');
      if (footerEl) document.body.appendChild(footerEl);

      function initNav(scope) {
        const btn   = scope.querySelector('.menu-toggle');
        const panel = scope.querySelector('#nav-panel');
        if (btn && panel) {
          btn.addEventListener('click', () => {
            const open = panel.classList.toggle('open');
            btn.setAttribute('aria-expanded', open ? 'true' : 'false');
          });
        }
        const here = location.pathname.replace(/\/+$/, '').toLowerCase();
        scope.querySelectorAll('.nav-link').forEach(a => {
          let href = (a.getAttribute('href') || '').toLowerCase().replace(/\/+$/, '');
          if (href === '/blog/') href = '/blog';
          if (here === href || ((here === '' || here === '/') && href === '/index.html')) {
            a.setAttribute('aria-current', 'page');
          }
          if (here.startsWith('/blog') && href === '/blog') {
            a.setAttribute('aria-current', 'page');
          }
          if (here.includes('/mtg') && href === '/mtg.html') a.setAttribute('aria-current','page');
          if (here.includes('/projects') && href === '/projects.html') a.setAttribute('aria-current','page');
        });
      }
    } catch (e) {
      console.warn('Partial load failed:', e);
    }
  })();
  </script>

  <!-- Connection-aware background video loader -->
  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const c = navigator.connection || navigator.mozConnection || navigator.webkitConnection;
      const isFast = !c || (c.effectiveType === '4g' && c.downlink >= 5 && !c.saveData);
      const isWifiLike = !c || (['wifi','ethernet'].includes(c.type || '') || typeof c.type === 'undefined');
      const allowVideo = isFast && isWifiLike;

      const wrap = document.getElementById('bgVideo');
      const vid  = document.getElementById('bgVideoEl');
      if (!wrap || !vid) return;

      if (!allowVideo) {
        wrap.style.display = 'none';
        return;
      }

      vid.src = '/assets/Blackhole_Animtation.mp4';

      const onReady = () => {
        wrap.classList.add('ready');
        const p = vid.play();
        if (p && typeof p.catch === 'function') p.catch(() => {});
      };

      vid.addEventListener('canplay', onReady, { once: true });
      vid.addEventListener('loadeddata', onReady, { once: true });
      vid.addEventListener('loadedmetadata', () => { wrap.classList.add('ready'); }, { once: true });
    });
  </script>
</body>
</html>
